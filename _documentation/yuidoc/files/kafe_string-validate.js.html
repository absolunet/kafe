<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>kafe/string-validate.js - kafe</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http://www.absolunet.com/images/Logo_Absolunet.gif" title="kafe"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: kafe version 2-alpha</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/kafe.html">kafe</a></li>
            
                <li><a href="../classes/kafe.cms.drupal.html">kafe.cms.drupal</a></li>
            
                <li><a href="../classes/kafe.cms.magento.html">kafe.cms.magento</a></li>
            
                <li><a href="../classes/kafe.cms.sitecore.html">kafe.cms.sitecore</a></li>
            
                <li><a href="../classes/kafe.date.html">kafe.date</a></li>
            
                <li><a href="../classes/kafe.ext.addthis.html">kafe.ext.addthis</a></li>
            
                <li><a href="../classes/kafe.form.html">kafe.form</a></li>
            
                <li><a href="../classes/kafe.geolocation.html">kafe.geolocation</a></li>
            
                <li><a href="../classes/kafe.number.html">kafe.number</a></li>
            
                <li><a href="../classes/kafe.plugin.carousel.html">kafe.plugin.carousel</a></li>
            
                <li><a href="../classes/kafe.plugin.menu.html">kafe.plugin.menu</a></li>
            
                <li><a href="../classes/kafe.plugin.sticky.html">kafe.plugin.sticky</a></li>
            
                <li><a href="../classes/kafe.storage.html">kafe.storage</a></li>
            
                <li><a href="../classes/kafe.string.html">kafe.string</a></li>
            
                <li><a href="../classes/kafe.string.encrypt.html">kafe.string.encrypt</a></li>
            
                <li><a href="../classes/kafe.string.validate.html">kafe.string.validate</a></li>
            
                <li><a href="../classes/kafe.style.html">kafe.style</a></li>
            
                <li><a href="../classes/kafe.url.html">kafe.url</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/kafe.html">kafe</a></li>
            
                <li><a href="../modules/kafe.cms.html">kafe.cms</a></li>
            
                <li><a href="../modules/kafe.ext.html">kafe.ext</a></li>
            
                <li><a href="../modules/kafe.plugin.html">kafe.plugin</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: kafe/string-validate.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
//&gt;&gt;excludeStart(&#x27;excludeRequire&#x27;, pragmas.excludeRequire);
require([
	&#x27;libs/kafe/string&#x27;
]);
//&gt;&gt;excludeEnd(&#x27;excludeRequire&#x27;);

window.kafe.bonify({name:&#x27;string.validate&#x27;, version:&#x27;1.0&#x27;, obj:(function(kafe,undefined){
	var $ = kafe.dependencies.jQuery;


	/**
	* ### Version 1.0
	* String validation tools.
	*
	* @module kafe
	* @class kafe.string.validate 
	* @extensionfor kafe.string
	*/
	var validate = {};


	/**
	* Checks if a string is empty or contains only whitespaces.
	*
	* @method isEmpty
	* @param {String} string
	* @return {Boolean} If true, the string is empty or contains only whitespaces.
	* @example
	* 	kafe.string.validate.isEmpty(&#x27;kafe is awesome.&#x27;);
	* 	// returns false
	* @example
	* 	kafe.string.validate.isEmpty(&#x27; &#x27;);
	* 	// returns true
	*/
	validate.isEmpty = function () {
		return (arguments[0].replace(/^\s*|\s*$/g, &#x27;&#x27;).replace(/^\t*|\t*$/g, &#x27;&#x27;) === &#x27;&#x27;) ? true : false;
	};

	/**
	* Checks if a string is numeric.
	*
	* @method isNum
	* @param {String} string
	* @return {Boolean} If true, the string could be converted to a number.
	* @example
	* 	kafe.string.validate.isNum(&#x27;k4f3&#x27;);
	* 	// returns false
	* @example
	* 	kafe.string.validate.isNum(&#x27;43&#x27;);
	* 	// returns true
	*/
	validate.isNum = function(s) {
		return (s === Number(s).toString());
	};

	/**
	* Checks if a string is a valid email address.
	*
	* @method isEmail
	* @param {String} string
	* @return {Boolean} If true, the string is a valid email address.
	* @example
	* 	kafe.string.validate.isEmail(&#x27;mailbox@mailaddress&#x27;);
	* 	// returns false
	* @example
	* 	kafe.string.validate.isEmail(&#x27;kafe.feedback@absolunet.com&#x27;);
	* 	// returns true
	*/
	validate.isEmail = function(s) {
		s = s.replace(/^\s*|\s*$/g, &#x27;&#x27;);
		s = s.replace(/^\t*|\t*$/g, &#x27;&#x27;);
		return (/^\w+([\.\+-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(s) !== 0);
	};

	/**
	* Checks if a string is a valid or part of a valid Canadian postal code.
	*
	* @method isPostalCode
	* @param {String} string
	* @param {String} [format] Validation pattern (Regular expression). Default pattern is *([a-z][0-9]){3}*. Can also be set to *A1A 1A1* for a single precise value or as *A1A* and *1A1* when divided into two values.
	* @return {Boolean} If true, the string matches the validation format.
	* @example
	* 	kafe.string.validate.isPostalCode(&#x27;KAF123&#x27;);
	* 	// returns false
	* @example
	* 	kafe.string.validate.isPostalCode(&#x27;K4F 3F3&#x27;, &#x27;A1A 1A1&#x27;);
	* 	// returns true
	*/
	validate.isPostalCode = function(s,format) {
		switch (format) {
			case &#x27;A1A 1A1&#x27;: format=&#x27;[a-z][0-9][a-z] [0-9][a-z][0-9]&#x27;; break;
			case &#x27;A1A&#x27;:     format=&#x27;[a-z][0-9][a-z]&#x27;;                 break;
			case &#x27;1A1&#x27;:     format=&#x27;[0-9][a-z][0-9]&#x27;;                 break;
			default:        format=&#x27;([a-z][0-9]){3}&#x27;;                 break;
		}
		return new RegExp(&#x27;^&#x27;+format+&#x27;$&#x27;,&#x27;i&#x27;).test(s);
	};

	// if string is a valid credit card
	/**
	* Checks if a string is a valid credit card number and fits a specific brand pattern.
	* 
	* Source: [http://davidwalsh.name/validate-credit-cards](http://davidwalsh.name/validate-credit-cards)
	*
	* @method isCreditCard
	* @param {String} string
	* @param {String} [cardtype] A credit card brand abbreviation. Possible values are **mc** (Master Card), **ec** (Electronic Cash), **vi** (Visa), **ax** (American Express), **dc** (DC), **bl** (BL), **di** (Diner&#x27;s Club), **jcb** (JCB) or **er** (ER).
	* @return {Boolean} If true, the string is a valid credit card number.
	* @example
	* 	kafe.string.validate.isCreditCard(&#x27;k789 kafe 3789&#x27;, &#x27;mc&#x27;);
	* 	// returns false
	* @example
	* 	kafe.string.validate.isCreditCard(&#x27;1234 5678 1234 5678&#x27;, &#x27;vi&#x27;);
	* 	// returns true
	*/
	validate.isCreditCard = function(s,type) {

		// http://davidwalsh.name/validate-credit-cards
		// http://jsfiddle.net/silvinci/84bru/
		var
			_pattern = {
				mc:  &#x27;5[1-5][0-9]{14}&#x27;,                          // Master Card
				ec:  &#x27;5[1-5][0-9]{14}&#x27;,                          // Electronic Cash
				vi:  &#x27;4(?:[0-9]{12}|[0-9]{15})&#x27;,                 // Visa
				ax:  &#x27;3[47][0-9]{13}&#x27;,                           // American Express
				dc:  &#x27;3(?:0[0-5][0-9]{11}|[68][0-9]{12})&#x27;,       // DC
				bl:  &#x27;3(?:0[0-5][0-9]{11}|[68][0-9]{12})&#x27;,       // BL
				di:  &#x27;6011[0-9]{12}&#x27;,                            // Diner&#x27;s Club
				jcb: &#x27;(?:3[0-9]{15}|(2131|1800)[0-9]{11})&#x27;,      // JCB
				er:  &#x27;2(?:014|149)[0-9]{11}&#x27;                     // ER
			},


			_validateStructure = function(value, ccType) {
				value = String(value).replace(/[^0-9]/g, &#x27;&#x27;); // ignore dashes and whitespaces - We could even ignore all non-numeric chars (/[^0-9]/g)

				var cardinfo = creditCardValidator.cards,
					results  = []
				;

				if(ccType){
					var expr = &#x27;^&#x27; + cardinfo[ccType.toLowerCase()] + &#x27;$&#x27;;
					return expr ? !!value.match(expr) : false; // boolean
				}

				for(var i in cardinfo){
					if(value.match(&#x27;^&#x27; + cardinfo[i] + &#x27;$&#x27;)){
						results.push(i);
					}
				}
				return results.length ? results.join(&#x27;|&#x27;) : false; // String | boolean
			},


			// Luhn validator 
			_validateChecksum = function(value) {
				value = String(value).replace(/[^0-9]/g, &#x27;&#x27;); // ignore dashes and whitespaces - We could even ignore all non-numeric chars (/[^0-9]/g)
				var sum       = 0,
					parity    = value.length % 2
				;

				for(var i = 0; i &lt;= (value.length - 1); i++) { // We&#x27;ll iterate LTR - it&#x27;s faster and needs less calculating
					var digit = parseInt(value[i], 10);

					if(i % 2 == parity) {
						digit = digit * 2;
					}
					if(digit &gt; 9) {
						digit = digit - 9; // get the cossfoot - Exp: 10 - 9 = 1 + 0 | 12 - 9 = 1 + 2 | ... | 18 - 9 = 1 + 8
					}
					sum += digit;
				}
				return ((sum % 10) === 0); // divide by 10 and check if it ends in 0 - return true | false
			}
		;


		if (_validateChecksum(s)) {
			return _validateStructure(s, type);
		}

        return false;
	};


	return validate;
})(window.kafe)});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
