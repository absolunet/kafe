<!doctype html>
<html id="fr-CA" lang="fr" data-kafe-page="testDataPage">
<head>
	<meta charset="utf-8" />
	<title>kafe | complile test </title>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
	<script src="http://platform.twitter.com/widgets.js"></script>
	<script src="http://maps.google.com/maps/api/js?sensor=true"></script>

	<script src="../plugins/jquery/json.js"></script>
	<script src="../plugins/jquery/inputmask.js"></script>
	<script src="../plugins/qrcode.js"></script>

	<script src="../plugins/cssua.custom.js"></script>
	<script src="../kafe/kafe.js"></script>
	<script src="../kafe/date.js"></script>
	<script src="../kafe/form.js"></script>
	<script src="../kafe/geolocation.js"></script>
	<script src="../kafe/mobile.js"></script>
	<script src="../kafe/number.js"></script>
	<script src="../kafe/storage.js"></script>
	<script src="../kafe/string.js"></script>
	<script src="../kafe/string-encrypt.js"></script>
	<script src="../kafe/string-validate.js"></script>
	<script src="../kafe/style.js"></script>
	<script src="../kafe/url.js"></script>
	
	<script src="../kafe/plugin/carousel.js"></script>
	<script src="../kafe/plugin/qrcode.js"></script>
	<script src="../kafe/plugin/sticky.js"></script>
	<script src="../kafe/plugin/webcropper.js"></script>

	<script src="../kafe/extension/addthis.js"></script>
	<script src="../kafe/extension/bbq.js"></script>
	<script src="../kafe/extension/colorbox.js"></script>
	<script src="../kafe/extension/disqus.js"></script>
	<script src="../kafe/extension/facebook.js"></script>
	<script src="../kafe/extension/flickr.js"></script>
	<script src="../kafe/extension/googlemaps.js"></script>
	<script src="../kafe/extension/googlemaps-styles.js"></script>
	<script src="../kafe/extension/inputmask.js"></script>
	<script src="../kafe/extension/soundcloud.js"></script>
	<script src="../kafe/extension/twitter.js"></script>
	<script src="../kafe/extension/youtube.js"></script>


	<!--script src="../tequila/tequila.js"></script>
		<script src="../tequila/tween.js"></script-->
		
		
		
		
	<style>
	table {
		border-collapse:collapse;
	}
	td {
		width:10px; height:10px;
		padding:0;
	}
	td.X {
		background-color:#000;
	}
	</style>
</head>
<body id="Treasure" class="Room">

	<input type="text" class="Date" />
	
	<div id="LOG"></div>

	<div id="gl"></div>
	
	<div id="qr"></div>


	<input type="text" class="autofocus" maxlength="20" />
	<input type="text" id="x1" class="autofocus" maxlength="3" />
	<input type="text" id="x2" class="autofocus" maxlength="3" />
	<input type="text" id="x3" class="autofocus" maxlength="3" />
	<input type="text" id="x4" class="autofocus" maxlength="3" />

	<textarea id="maxou"></textarea>
		



	<script>

	kafe.extend({ name: 'test', version: '0.1', obj: (function ($, K, undefined) {


	    var _patate = "privateStaticVar";

		// private function with scope for instasiated stuff
	    function _privateMethod(self, data) {
			return 'private -- ' + _patate + ' -- ' + self.inst1 + ' -- ' + data;
	    }


	    // ------------------------------------------
	    // PUBLIC
	    // ------------------------------------------

	    var TEST = K.fn.createInstantiableObject();
	
		// public static variable (never do)
	    TEST.params = 'STATIC';

		// public static function (ok for non-instatiable stuff)
	    TEST.publicStaticFunction = function () {
			console.log('func1-'+_patate);
	    };
	



		// public instasiable variables (never do)
		TEST.prototype.ddddd = 'NO GOOD';

		// constructor
		TEST.prototype.init = function(p) {
			var self = this;
			self.inst1 = p;
		};

		// public instasiable method
	   TEST.prototype.func1 = function (data) {
			var self = this;
			
			console.log( _privateMethod(self, data) );

			$('html').click(function(){
				console.log('func1'+self.inst1);
				console.log('func1'+TEST.params);
				console.log('func1'+self.ddddd);

			});
	    };



	    return TEST;

	})(jQuery, kafe)});





		$(function(){
			
			console.log(kafe.string.generateGuid());
			
			var kTest = kafe.ext.test;


			var abc = kTest('patate');
			var efg = kTest('poil');
			abc.func1('hey');
			efg.func1('you');

		/**/
		
			var o = {
				patate: {
					d:  new Date(),
					b1: true,
					b2: false,
					n1: 43,
					n2: 43.5,
					f:  function(e) { return e;	},
					a: [1,2,3,true,new Date(),'ddd'],
					s: 'fdhjkfdldsf'
				},
				patate2: {
					dd:  new Date(2000,0,1,2,2,2),
					bb1: false,
					bb2: true,
					nn1: 23,
					nn2: 433.5,
					ff:  function(e) { return e; },
					aa: ['sdsd',324],
					ss: 'lorem'
				}
			};

			kafe.storage.setPersistentItem('testJb', o);
			kafe.storage.setPersistentItem('name', 'n4m3');
			kafe.storage.setPersistentItem('name:dhjsdkl', 'alpha');
			kafe.storage.setPersistentItem('name:34u34dsm', '4lph4num');

			console.log( kafe.storage.getPersistentItem('testJb') );
			console.log( kafe.storage.getPersistentItem('name') );

			console.log( kafe.storage.getPersistentNamespaceKeys('testJb') );
			console.log( kafe.storage.getPersistentNamespaceItems('testJb') );
			console.log( kafe.storage.getPersistentNamespaceKeys('name') );
			console.log( kafe.storage.getPersistentNamespaceItems('name') );
			console.log( kafe.storage.getAllPersistentKeys() );
			console.log( kafe.storage.getAllPersistentItems() );

			kafe.storage.removeAllPersistent();

			console.log( kafe.storage.getAllPersistentItems() );


			kafe.geolocation.locate({
				msgContainer: '#gl',
				lang:'fr',
				success: function(d) {
					console.log(d);
				},
				error: function(d) {
					console.log(d);
				}
			});



			$('body').append(
				kafe.ext.twitter.linkifyTweet('#patate Lancement http://www.twitter.com officiel de la #nouvelle technologie http://www.google.com Smart Layer et du premier produit de @cette technologie, @ruin11 le Smart Server.',{
					link: '<a rel="link2">',
					hash: '<a rel="hash3">',
					user: '<a rel="user3">'
				})
			);


			kafe.form.onEnter('input.Patate',function(obj) {
				alert($(obj).val());
			});

			window.PATATE = new Date('2010-02-24');

			var kMask = kafe.ext.inputmask; 
			$("input.Date").inputmask( kMask.getMask('date') );
			
			//console.log( kafe.env('dtc').e3 );
		
		
			kafe.form.autofocusOnNext('input.autofocus');
			
			kafe.form.maxLength('#maxou', 20, false, function(nb) {
				$('#gl').html(nb);
			});
		
		
			//kafe.ext.googlemaps.create();
			//kafe.ext.googlemaps.setStyle( kafe.ext.googlemaps.styles.getStyle('entrepreneur') );
		
			console.log( kafe.env('culture') );
			console.log( kafe.env('lang') );
			console.log( kafe.env('page') );
			console.log( kafe.env('tmpl') );
			console.log( kafe.env('dtc') );
		
			$('#qr').appendHTML5('dd');
			/**/

			/**/
			$('#qr').html(
				kafe.plugin.qrcode.generate('http://www.absolunet.com')
			);
			/**/
			
			
			kafe.ext.flickr.getPhotostream({ user_id: '42686706@N04', per_page: '10', page: '50'}, function(data) {
				console.log(data);
			});
			
			
		});

	</script>


</body>
</html>


